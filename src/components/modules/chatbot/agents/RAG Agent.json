{
  "name": "RAG Agent",
  "nodes": [
    {
      "parameters": {},
      "id": "bea03f24-edfa-455b-8005-4416165b89c4",
      "name": "Execute Workflow Trigger",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1,
      "position": [
        176,
        -32
      ]
    },
    {
      "parameters": {
        "jsCode": "// Extraer la pregunta del input\nconst question = $input.item.json.question || $input.item.json.query || '';\nconst lowerQuestion = question.toLowerCase();\n\n// Detectar idioma (español por defecto)\nconst isEnglish = /\\b(what|how|can|do|you|services|contact|about|portfolio)\\b/i.test(question) && \n                  !/\\b(qué|cómo|servicios|contacto|sobre|portafolio)\\b/i.test(question);\n\nreturn {\n  json: {\n    question: question,\n    lowerQuestion: lowerQuestion,\n    language: isEnglish ? 'en' : 'es',\n    timestamp: new Date().toISOString()\n  }\n};"
      },
      "id": "9cea42bf-3489-4e2e-9227-554320d47914",
      "name": "Parse Question",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        400,
        -32
      ]
    },
    {
      "parameters": {
        "jsCode": "// Base de conocimientos completa de Aurin con links clickeables\nconst question = $input.item.json.lowerQuestion;\nconst lang = $input.item.json.language;\n\n// URLs por idioma\nconst urls = {\n  es: {\n    home: 'https://www.aurin.mx/',\n    servicios: 'https://www.aurin.mx/servicios',\n    proyectos: 'https://www.aurin.mx/proyectos',\n    nosotros: 'https://www.aurin.mx/nosotros',\n    contacto: 'https://www.aurin.mx/contacto'\n  },\n  en: {\n    home: 'https://www.aurin.mx/en',\n    servicios: 'https://www.aurin.mx/en/services',\n    proyectos: 'https://www.aurin.mx/en/projects',\n    nosotros: 'https://www.aurin.mx/en/about',\n    contacto: 'https://www.aurin.mx/en/contact'\n  }\n};\n\nconst currentUrls = urls[lang];\n\n// Base de datos de conocimientos\nconst knowledgeBase = {\n  servicios: {\n    keywords: ['servicio', 'ofrece', 'hace', 'que hace', 'qué ofrece', 'services', 'what do you do'],\n    response: lang === 'es' \n      ? `**Servicios de Aurin**\n\nAurin es una agencia de diseño y comunicación visual con sede en México. \n\n🎨 SERVICIOS PRINCIPALES:\n\n1. Diseño Gráfico\n   • Servicios profesionales de diseño gráfico para medios digitales e impresos\n   • Materiales de marketing y publicidad\n   • Diseño editorial y de publicaciones\n\n2. Branding e Identidad Corporativa\n   • Desarrollo de marca completo\n   • Identidad visual estratégica\n   • Manual de marca y lineamientos de uso\n   • Naming y posicionamiento\n\n3. Diseño UX/UI\n   • Diseño de experiencia de usuario\n   • Interfaces digitales intuitivas\n   • Prototipado y testing de usabilidad\n   • Diseño responsive y mobile-first\n\n4. Estrategia Digital\n   • Consultoría de comunicación digital\n   • Estrategia de contenido visual\n   • Optimización de presencia digital\n   • Marketing visual\n\n📋 NUESTRO PROCESO:\n1. Consulta inicial gratuita\n2. Investigación y análisis estratégico\n3. Desarrollo creativo\n4. Implementación y entrega\n5. Seguimiento post-lanzamiento\n\n🔗 Ver todos nuestros servicios:\nhttps://www.aurin.mx/servicios\n\n¿Te gustaría agendar una consulta gratuita para discutir tu proyecto?`\n      : `**Aurin Services**\n\nAurin is a design and visual communication agency based in Mexico.\n\n🎨 MAIN SERVICES:\n\n1. Graphic Design\n   • Professional graphic design services for digital and print media\n   • Marketing and advertising materials\n   • Editorial and publication design\n\n2. Branding & Corporate Identity\n   • Complete brand development\n   • Strategic visual identity\n   • Brand manual and usage guidelines\n   • Naming and positioning\n\n3. UX/UI Design\n   • User experience design\n   • Intuitive digital interfaces\n   • Prototyping and usability testing\n   • Responsive and mobile-first design\n\n4. Digital Strategy\n   • Digital communication consulting\n   • Visual content strategy\n   • Digital presence optimization\n   • Visual marketing\n\n📋 OUR PROCESS:\n1. Free initial consultation\n2. Research and strategic analysis\n3. Creative development\n4. Implementation and delivery\n5. Post-launch support\n\n🔗 View all our services:\nhttps://www.aurin.mx/en/services\n\nWould you like to schedule a free consultation to discuss your project?`\n  },\n  \n  nosotros: {\n    keywords: ['quiénes son', 'sobre ustedes', 'quién es aurin', 'about', 'who are you', 'aldea creativa'],\n    response: lang === 'es'\n      ? `**Sobre Aurin**\\n\\n**🌟 Quiénes Somos:**\\nAurin es una agencia de diseño y comunicación visual fundada en 2020, con sede en México. Formamos parte de **Aldea Creativa**, un ecosistema de creativos y profesionales del diseño.\\n\\n**🎯 Nuestra Misión:**\\nExploramos rutas inexploradas en comunicación visual, combinando diseño estratégico con storytelling visual para crear experiencias memorables.\\n\\n**💡 Nuestra Filosofía:**\\n- **Diseño con propósito:** Cada proyecto tiene un objetivo claro\\n- **Colaboración creativa:** Trabajamos codo a codo con nuestros clientes\\n- **Innovación constante:** Exploramos nuevas formas de comunicar visualmente\\n- **Excelencia en ejecución:** Atención al detalle en cada entrega\\n\\n🔗 **Conoce más sobre nosotros:** ${currentUrls.nosotros}\\n🌐 **Sitio web:** ${currentUrls.home}\\n📧 **Email:** [hey@aurin.mx](mailto:hey@aurin.mx)`\n      : `**About Aurin**\\n\\nAurin is a design and visual communication agency founded in 2020, based in Mexico. We are part of **Aldea Creativa**, an ecosystem of creatives and design professionals.\\n\\n🔗 **Learn more about us:** ${currentUrls.nosotros}\\n🌐 **Website:** ${currentUrls.home}\\n📧 **Email:** [hey@aurin.mx](mailto:hey@aurin.mx)`\n  },\n  \n  portafolio: {\n    keywords: ['portafolio', 'proyectos', 'trabajos', 'clientes', 'portfolio', 'cases', 'ejemplos', 'projects'],\n    response: lang === 'es'\n      ? `**Portafolio de Aurin**\\n\\n**🏆 Nuestra Experiencia:**\\nHemos trabajado con empresas de diversos sectores, desde startups emergentes hasta empresas establecidas.\\n\\n**🎯 Sectores:**\\n- Tecnología y startups\\n- Retail y comercio\\n- Servicios profesionales\\n- Educación y cultura\\n- Gastronomía y hospitalidad\\n- Salud y bienestar\\n\\n**📱 Tipos de Proyectos:**\\n- Branding completo\\n- Rediseño de marca\\n- Diseño de sitios web y aplicaciones\\n- Campañas de marketing visual\\n- Sistemas de identidad visual\\n- Diseño editorial\\n\\n🔗 **Ver nuestros proyectos:** ${currentUrls.proyectos}\\n\\n¿Te gustaría discutir tu proyecto?`\n      : `**Aurin Portfolio**\\n\\nWe've worked with companies across various sectors, from emerging startups to established enterprises.\\n\\n🔗 **View our projects:** ${currentUrls.proyectos}\\n\\nWould you like to discuss your project?`\n  },\n  \n  proceso: {\n    keywords: ['proceso', 'cómo trabajan', 'metodología', 'pasos', 'how do you work', 'workflow'],\n    response: lang === 'es'\n      ? `**Proceso de Trabajo de Aurin**\\n\\n**📋 Nuestra Metodología en 5 Pasos:**\\n\\n**1. 💬 Consulta Inicial (GRATUITA)**\\n   - Reunión para conocer tu proyecto (30-60 min)\\n   - Entendimiento de objetivos y necesidades\\n\\n**2. 🔍 Investigación y Estrategia**\\n   - Análisis de competencia y mercado\\n   - Definición de concepto creativo\\n\\n**3. 🎨 Desarrollo Creativo**\\n   - Primeras propuestas de diseño\\n   - Iteración basada en feedback\\n\\n**4. ✅ Implementación y Entrega**\\n   - Desarrollo final de archivos\\n   - Entrega de manual de uso\\n\\n**5. 🚀 Seguimiento Post-Lanzamiento**\\n   - Soporte en implementación\\n   - Ajustes menores si es necesario\\n\\n**⏱️ Tiempos estimados:**\\n- Branding completo: 4-8 semanas\\n- Diseño web: 3-6 semanas\\n- Diseño gráfico: 1-3 semanas\\n\\n🔗 **Más información:** ${currentUrls.servicios}\\n\\n¿Listo para comenzar? ¡Agenda tu consulta gratuita!`\n      : `**Aurin's Work Process**\\n\\n**📋 Our 5-Step Methodology:**\\n\\n1. 💬 Initial Consultation (FREE, 30-60 min)\\n2. 🔍 Research & Strategy\\n3. 🎨 Creative Development\\n4. ✅ Implementation & Delivery\\n5. 🚀 Post-Launch Support\\n\\n🔗 **More info:** ${currentUrls.servicios}\\n\\nReady to start? Schedule your free consultation!`\n  },\n  \n  precios: {\n    keywords: ['precio', 'costo', 'cuánto cuesta', 'tarifas', 'presupuesto', 'price', 'cost', 'how much'],\n    response: lang === 'es'\n      ? `**Inversión en Proyectos de Aurin**\\n\\n**💰 Enfoque de Pricing:**\\nEn Aurin, cada proyecto es único. Nuestras tarifas se adaptan a la complejidad, alcance y objetivos específicos.\\n\\n**🎯 Factores que consideramos:**\\n- Alcance del proyecto\\n- Complejidad del diseño\\n- Timeline requerido\\n- Nivel de investigación necesario\\n\\n**💡 Siguiente Paso:**\\nPara darte un presupuesto preciso, necesitamos entender mejor tu proyecto.\\n\\n**Durante la consulta gratuita (30-60 min):**\\n✅ Entendemos tus necesidades\\n✅ Definimos alcance del proyecto\\n✅ Te presentamos una propuesta personalizada\\n✅ Respondemos todas tus preguntas\\n\\n🔗 **Contáctanos:** ${currentUrls.contacto}\\n📧 **Email:** [hey@aurin.mx](mailto:hey@aurin.mx)\\n\\n¿Prefieres agendar una videollamada o que te contactemos por email?`\n      : `**Investment in Aurin Projects**\\n\\nEach project is unique. Our rates adapt to complexity, scope, and specific objectives.\\n\\nFor an accurate quote, we need to understand your project better.\\n\\n🔗 **Contact us:** ${currentUrls.contacto}\\n📧 **Email:** [hey@aurin.mx](mailto:hey@aurin.mx)\\n\\nSchedule a free consultation or email us!`\n  },\n  \n  contacto: {\n    keywords: ['contacto', 'email', 'teléfono', 'cita', 'reunión', 'contact', 'meeting', 'appointment', 'reach'],\n    response: lang === 'es'\n      ? `**Contacta a Aurin**\\n\\n**📧 Email:** [hey@aurin.mx](mailto:hey@aurin.mx)\\n\\n**🌐 Sitio Web:** ${currentUrls.home}\\n\\n**📍 Ubicación:** Aldea Creativa, México\\n\\n**⏰ Horario de Atención:**\\nLunes a Viernes: 9:00 AM - 6:00 PM\\n(Zona horaria: Ciudad de México GMT-6)\\n\\n**📅 Consulta Gratuita (30-60 min):**\\nOfrecemos consultas gratuitas para:\\n- Entender tu proyecto\\n- Discutir objetivos y necesidades\\n- Proponer soluciones\\n- Responder todas tus preguntas\\n\\n**🔗 Enlaces Rápidos:**\\n• [Inicio](${currentUrls.home})\\n• [Servicios](${currentUrls.servicios})\\n• [Proyectos](${currentUrls.proyectos})\\n• [Nosotros](${currentUrls.nosotros})\\n• [Contacto](${currentUrls.contacto})\\n\\n**¿Cómo prefieres continuar?**\\n1. 📅 Agendar una videollamada\\n2. ✉️ Recibir información por email\\n3. 🎫 Crear un ticket de soporte`\n      : `**Contact Aurin**\\n\\n**📧 Email:** [hey@aurin.mx](mailto:hey@aurin.mx)\\n\\n**🌐 Website:** ${currentUrls.home}\\n\\n**📍 Location:** Aldea Creativa, Mexico\\n\\n**⏰ Business Hours:**\\nMonday - Friday: 9:00 AM - 6:00 PM\\n(Mexico City timezone GMT-6)\\n\\n**📅 Free Consultation (30-60 min)**\\n\\n**🔗 Quick Links:**\\n• [Home](${currentUrls.home})\\n• [Services](${currentUrls.servicios})\\n• [Projects](${currentUrls.proyectos})\\n• [About](${currentUrls.nosotros})\\n• [Contact](${currentUrls.contacto})\\n\\n**How would you like to proceed?**\\n1. 📅 Schedule a video call\\n2. ✉️ Get info via email\\n3. 🎫 Create a support ticket`\n  },\n  \n  herramientas: {\n    keywords: ['herramientas', 'software', 'programas', 'tecnología', 'tools', 'tech stack'],\n    response: lang === 'es'\n      ? `**Herramientas y Tecnología de Aurin**\\n\\n**🎨 Diseño y Creatividad:**\\n- Adobe Creative Suite (Photoshop, Illustrator, InDesign)\\n- Figma para diseño UX/UI\\n- Sketch para interfaces\\n- Adobe XD para prototipos\\n\\n**🖥️ Desarrollo Web:**\\n- HTML5, CSS3, JavaScript\\n- React y frameworks modernos\\n- Responsive design\\n- Optimización web\\n\\n**📊 Estrategia y Análisis:**\\n- Research de mercado\\n- Testing de usabilidad\\n- Analytics y métricas\\n\\n**✨ Storytelling Visual:**\\nUtilizamos técnicas avanzadas de storytelling para crear narrativas visuales que conectan emocionalmente con tu audiencia.\\n\\n🔗 **Ver nuestro trabajo:** ${currentUrls.proyectos}\\n\\n¿Tienes un proyecto en mente?`\n      : `**Aurin's Tools & Technology**\\n\\n**🎨 Design & Creativity:**\\n- Adobe Creative Suite\\n- Figma for UX/UI\\n- Sketch for interfaces\\n\\n**🖥️ Web Development:**\\n- HTML5, CSS3, JavaScript\\n- React & modern frameworks\\n\\n🔗 **See our work:** ${currentUrls.proyectos}\\n\\nHave a project in mind?`\n  },\n\n  uxui: {\n    keywords: ['ux', 'ui', 'experiencia', 'usuario', 'interfaz', 'usabilidad', 'user experience'],\n    response: lang === 'es'\n      ? `**Servicios UX/UI de Aurin**\\n\\n**🎯 Diseño de Experiencia de Usuario (UX):**\\n- Investigación de usuarios\\n- Personas y user journeys\\n- Arquitectura de información\\n- Testing de usabilidad\\n\\n**🎨 Diseño de Interfaz (UI):**\\n- Interfaces intuitivas y atractivas\\n- Sistemas de diseño escalables\\n- Componentes reutilizables\\n- Microinteracciones\\n\\n**📱 Responsive Design:**\\n- Mobile-first approach\\n- Adaptación a todos los dispositivos\\n- Performance optimization\\n\\n**✅ Entregables:**\\n- Prototipos interactivos\\n- Design system completo\\n- Especificaciones para desarrollo\\n- Guías de estilo\\n\\n🔗 **Ver servicios UX/UI:** ${currentUrls.servicios}\\n\\n¿Tienes un proyecto digital en mente? ¡Hablemos!`\n      : `**Aurin's UX/UI Services**\\n\\n**🎯 User Experience (UX):**\\n- User research\\n- User journeys\\n- Information architecture\\n\\n**🎨 User Interface (UI):**\\n- Intuitive interfaces\\n- Scalable design systems\\n- Micro-interactions\\n\\n**📱 Responsive Design**\\n\\n🔗 **View UX/UI services:** ${currentUrls.servicios}\\n\\nHave a digital project? Let's talk!`\n  }\n};\n\n// Buscar la mejor respuesta\nlet bestMatch = null;\nlet maxMatches = 0;\n\nfor (const [category, data] of Object.entries(knowledgeBase)) {\n  const matches = data.keywords.filter(keyword => question.includes(keyword)).length;\n  if (matches > maxMatches) {\n    maxMatches = matches;\n    bestMatch = data.response;\n  }\n}\n\n// Si no hay coincidencia, dar respuesta genérica\nconst finalResponse = bestMatch || (lang === 'es'\n  ? `**Información sobre Aurin**\\n\\nAurin es una agencia de diseño y comunicación visual en México, especializada en:\\n\\n- 🎨 Diseño gráfico y branding\\n- 💻 UX/UI y diseño digital\\n- 📊 Estrategia de comunicación visual\\n- ✨ Storytelling visual\\n\\n**Puedo ayudarte con información sobre:**\\n- Nuestros servicios y proceso de trabajo\\n- Portafolio y casos de éxito\\n- Precios y presupuestos\\n- Agendar una consulta gratuita\\n- Información de contacto\\n\\n**🔗 Enlaces útiles:**\\n• [Inicio](${currentUrls.home})\\n• [Servicios](${currentUrls.servicios})\\n• [Proyectos](${currentUrls.proyectos})\\n• [Nosotros](${currentUrls.nosotros})\\n• [Contacto](${currentUrls.contacto})\\n\\n¿Qué te gustaría saber específicamente?`\n  : `**About Aurin**\\n\\nAurin is a design and visual communication agency in Mexico, specialized in:\\n\\n- 🎨 Graphic design & branding\\n- 💻 UX/UI & digital design\\n- 📊 Visual communication strategy\\n- ✨ Visual storytelling\\n\\n**🔗 Useful links:**\\n• [Home](${currentUrls.home})\\n• [Services](${currentUrls.servicios})\\n• [Projects](${currentUrls.proyectos})\\n• [About](${currentUrls.nosotros})\\n• [Contact](${currentUrls.contacto})\\n\\nWhat would you like to know?`);\n\nreturn {\n  json: {\n    response: finalResponse,\n    category: bestMatch ? Object.keys(knowledgeBase).find(k => knowledgeBase[k].response === bestMatch) : 'general',\n    confidence: maxMatches > 0 ? 'high' : 'low',\n    language: lang\n  }\n};"
      },
      "id": "79ddbbda-7472-4f3e-b71d-c7ddf7733db4",
      "name": "Knowledge Base Lookup",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        608,
        -32
      ]
    },
    {
      "parameters": {
        "jsCode": "// Formatear respuesta para el agente principal\nconst response = $input.item.json.response;\nconst category = $input.item.json.category;\nconst confidence = $input.item.json.confidence;\nconst language = $input.item.json.language;\n\nreturn {\n  json: {\n    output: response,\n    success: true,\n    source: 'knowledge_base',\n    category: category,\n    confidence: confidence,\n    language: language\n  }\n};"
      },
      "id": "96036f11-9022-46c9-9d39-37fc806bb2ae",
      "name": "Format Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        832,
        -32
      ]
    }
  ],
  "pinData": {},
  "connections": {
    "Execute Workflow Trigger": {
      "main": [
        [
          {
            "node": "Parse Question",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Question": {
      "main": [
        [
          {
            "node": "Knowledge Base Lookup",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Knowledge Base Lookup": {
      "main": [
        [
          {
            "node": "Format Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "b40c2f92-13da-43ad-8ade-663a01926d5b",
  "meta": {
    "instanceId": "473b8e2f44c2c249c630a674e0ffd242a718055278d7a389908825386c510f30"
  },
  "id": "rPEVrWKRByrpoSC6",
  "tags": []
}