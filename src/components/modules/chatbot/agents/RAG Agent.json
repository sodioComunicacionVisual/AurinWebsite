{
  "name": "RAG Agent",
  "nodes": [
    {
      "parameters": {},
      "id": "bea03f24-edfa-455b-8005-4416165b89c4",
      "name": "Execute Workflow Trigger",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1,
      "position": [
        176,
        -32
      ]
    },
    {
      "parameters": {
        "jsCode": "// Extraer la pregunta del input\nconst question = $input.item.json.question || $input.item.json.query || '';\nconst lowerQuestion = question.toLowerCase();\n\n// Detectar idioma (espaÃ±ol por defecto)\nconst isEnglish = /\\b(what|how|can|do|you|services|contact|about|portfolio)\\b/i.test(question) && \n                  !/\\b(quÃ©|cÃ³mo|servicios|contacto|sobre|portafolio)\\b/i.test(question);\n\nreturn {\n  json: {\n    question: question,\n    lowerQuestion: lowerQuestion,\n    language: isEnglish ? 'en' : 'es',\n    timestamp: new Date().toISOString()\n  }\n};"
      },
      "id": "9cea42bf-3489-4e2e-9227-554320d47914",
      "name": "Parse Question",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        400,
        -32
      ]
    },
    {
      "parameters": {
        "jsCode": "// Base de conocimientos completa de Aurin con links clickeables\nconst question = $input.item.json.lowerQuestion;\nconst lang = $input.item.json.language;\n\n// URLs por idioma\nconst urls = {\n  es: {\n    home: 'https://www.aurin.mx/',\n    servicios: 'https://www.aurin.mx/servicios',\n    proyectos: 'https://www.aurin.mx/proyectos',\n    nosotros: 'https://www.aurin.mx/nosotros',\n    contacto: 'https://www.aurin.mx/contacto'\n  },\n  en: {\n    home: 'https://www.aurin.mx/en',\n    servicios: 'https://www.aurin.mx/en/services',\n    proyectos: 'https://www.aurin.mx/en/projects',\n    nosotros: 'https://www.aurin.mx/en/about',\n    contacto: 'https://www.aurin.mx/en/contact'\n  }\n};\n\nconst currentUrls = urls[lang];\n\n// Base de datos de conocimientos\nconst knowledgeBase = {\n  servicios: {\n    keywords: ['servicio', 'ofrece', 'hace', 'que hace', 'quÃ© ofrece', 'services', 'what do you do'],\n    response: lang === 'es' \n      ? `**Servicios de Aurin**\n\nAurin es una agencia de diseÃ±o y comunicaciÃ³n visual con sede en MÃ©xico. \n\nðŸŽ¨ SERVICIOS PRINCIPALES:\n\n1. DiseÃ±o GrÃ¡fico\n   â€¢ Servicios profesionales de diseÃ±o grÃ¡fico para medios digitales e impresos\n   â€¢ Materiales de marketing y publicidad\n   â€¢ DiseÃ±o editorial y de publicaciones\n\n2. Branding e Identidad Corporativa\n   â€¢ Desarrollo de marca completo\n   â€¢ Identidad visual estratÃ©gica\n   â€¢ Manual de marca y lineamientos de uso\n   â€¢ Naming y posicionamiento\n\n3. DiseÃ±o UX/UI\n   â€¢ DiseÃ±o de experiencia de usuario\n   â€¢ Interfaces digitales intuitivas\n   â€¢ Prototipado y testing de usabilidad\n   â€¢ DiseÃ±o responsive y mobile-first\n\n4. Estrategia Digital\n   â€¢ ConsultorÃ­a de comunicaciÃ³n digital\n   â€¢ Estrategia de contenido visual\n   â€¢ OptimizaciÃ³n de presencia digital\n   â€¢ Marketing visual\n\nðŸ“‹ NUESTRO PROCESO:\n1. Consulta inicial gratuita\n2. InvestigaciÃ³n y anÃ¡lisis estratÃ©gico\n3. Desarrollo creativo\n4. ImplementaciÃ³n y entrega\n5. Seguimiento post-lanzamiento\n\nðŸ”— Ver todos nuestros servicios:\nhttps://www.aurin.mx/servicios\n\nÂ¿Te gustarÃ­a agendar una consulta gratuita para discutir tu proyecto?`\n      : `**Aurin Services**\n\nAurin is a design and visual communication agency based in Mexico.\n\nðŸŽ¨ MAIN SERVICES:\n\n1. Graphic Design\n   â€¢ Professional graphic design services for digital and print media\n   â€¢ Marketing and advertising materials\n   â€¢ Editorial and publication design\n\n2. Branding & Corporate Identity\n   â€¢ Complete brand development\n   â€¢ Strategic visual identity\n   â€¢ Brand manual and usage guidelines\n   â€¢ Naming and positioning\n\n3. UX/UI Design\n   â€¢ User experience design\n   â€¢ Intuitive digital interfaces\n   â€¢ Prototyping and usability testing\n   â€¢ Responsive and mobile-first design\n\n4. Digital Strategy\n   â€¢ Digital communication consulting\n   â€¢ Visual content strategy\n   â€¢ Digital presence optimization\n   â€¢ Visual marketing\n\nðŸ“‹ OUR PROCESS:\n1. Free initial consultation\n2. Research and strategic analysis\n3. Creative development\n4. Implementation and delivery\n5. Post-launch support\n\nðŸ”— View all our services:\nhttps://www.aurin.mx/en/services\n\nWould you like to schedule a free consultation to discuss your project?`\n  },\n  \n  nosotros: {\n    keywords: ['quiÃ©nes son', 'sobre ustedes', 'quiÃ©n es aurin', 'about', 'who are you', 'aldea creativa'],\n    response: lang === 'es'\n      ? `**Sobre Aurin**\\n\\n**ðŸŒŸ QuiÃ©nes Somos:**\\nAurin es una agencia de diseÃ±o y comunicaciÃ³n visual fundada en 2020, con sede en MÃ©xico. Formamos parte de **Aldea Creativa**, un ecosistema de creativos y profesionales del diseÃ±o.\\n\\n**ðŸŽ¯ Nuestra MisiÃ³n:**\\nExploramos rutas inexploradas en comunicaciÃ³n visual, combinando diseÃ±o estratÃ©gico con storytelling visual para crear experiencias memorables.\\n\\n**ðŸ’¡ Nuestra FilosofÃ­a:**\\n- **DiseÃ±o con propÃ³sito:** Cada proyecto tiene un objetivo claro\\n- **ColaboraciÃ³n creativa:** Trabajamos codo a codo con nuestros clientes\\n- **InnovaciÃ³n constante:** Exploramos nuevas formas de comunicar visualmente\\n- **Excelencia en ejecuciÃ³n:** AtenciÃ³n al detalle en cada entrega\\n\\nðŸ”— **Conoce mÃ¡s sobre nosotros:** ${currentUrls.nosotros}\\nðŸŒ **Sitio web:** ${currentUrls.home}\\nðŸ“§ **Email:** [hey@aurin.mx](mailto:hey@aurin.mx)`\n      : `**About Aurin**\\n\\nAurin is a design and visual communication agency founded in 2020, based in Mexico. We are part of **Aldea Creativa**, an ecosystem of creatives and design professionals.\\n\\nðŸ”— **Learn more about us:** ${currentUrls.nosotros}\\nðŸŒ **Website:** ${currentUrls.home}\\nðŸ“§ **Email:** [hey@aurin.mx](mailto:hey@aurin.mx)`\n  },\n  \n  portafolio: {\n    keywords: ['portafolio', 'proyectos', 'trabajos', 'clientes', 'portfolio', 'cases', 'ejemplos', 'projects'],\n    response: lang === 'es'\n      ? `**Portafolio de Aurin**\\n\\n**ðŸ† Nuestra Experiencia:**\\nHemos trabajado con empresas de diversos sectores, desde startups emergentes hasta empresas establecidas.\\n\\n**ðŸŽ¯ Sectores:**\\n- TecnologÃ­a y startups\\n- Retail y comercio\\n- Servicios profesionales\\n- EducaciÃ³n y cultura\\n- GastronomÃ­a y hospitalidad\\n- Salud y bienestar\\n\\n**ðŸ“± Tipos de Proyectos:**\\n- Branding completo\\n- RediseÃ±o de marca\\n- DiseÃ±o de sitios web y aplicaciones\\n- CampaÃ±as de marketing visual\\n- Sistemas de identidad visual\\n- DiseÃ±o editorial\\n\\nðŸ”— **Ver nuestros proyectos:** ${currentUrls.proyectos}\\n\\nÂ¿Te gustarÃ­a discutir tu proyecto?`\n      : `**Aurin Portfolio**\\n\\nWe've worked with companies across various sectors, from emerging startups to established enterprises.\\n\\nðŸ”— **View our projects:** ${currentUrls.proyectos}\\n\\nWould you like to discuss your project?`\n  },\n  \n  proceso: {\n    keywords: ['proceso', 'cÃ³mo trabajan', 'metodologÃ­a', 'pasos', 'how do you work', 'workflow'],\n    response: lang === 'es'\n      ? `**Proceso de Trabajo de Aurin**\\n\\n**ðŸ“‹ Nuestra MetodologÃ­a en 5 Pasos:**\\n\\n**1. ðŸ’¬ Consulta Inicial (GRATUITA)**\\n   - ReuniÃ³n para conocer tu proyecto (30-60 min)\\n   - Entendimiento de objetivos y necesidades\\n\\n**2. ðŸ” InvestigaciÃ³n y Estrategia**\\n   - AnÃ¡lisis de competencia y mercado\\n   - DefiniciÃ³n de concepto creativo\\n\\n**3. ðŸŽ¨ Desarrollo Creativo**\\n   - Primeras propuestas de diseÃ±o\\n   - IteraciÃ³n basada en feedback\\n\\n**4. âœ… ImplementaciÃ³n y Entrega**\\n   - Desarrollo final de archivos\\n   - Entrega de manual de uso\\n\\n**5. ðŸš€ Seguimiento Post-Lanzamiento**\\n   - Soporte en implementaciÃ³n\\n   - Ajustes menores si es necesario\\n\\n**â±ï¸ Tiempos estimados:**\\n- Branding completo: 4-8 semanas\\n- DiseÃ±o web: 3-6 semanas\\n- DiseÃ±o grÃ¡fico: 1-3 semanas\\n\\nðŸ”— **MÃ¡s informaciÃ³n:** ${currentUrls.servicios}\\n\\nÂ¿Listo para comenzar? Â¡Agenda tu consulta gratuita!`\n      : `**Aurin's Work Process**\\n\\n**ðŸ“‹ Our 5-Step Methodology:**\\n\\n1. ðŸ’¬ Initial Consultation (FREE, 30-60 min)\\n2. ðŸ” Research & Strategy\\n3. ðŸŽ¨ Creative Development\\n4. âœ… Implementation & Delivery\\n5. ðŸš€ Post-Launch Support\\n\\nðŸ”— **More info:** ${currentUrls.servicios}\\n\\nReady to start? Schedule your free consultation!`\n  },\n  \n  precios: {\n    keywords: ['precio', 'costo', 'cuÃ¡nto cuesta', 'tarifas', 'presupuesto', 'price', 'cost', 'how much'],\n    response: lang === 'es'\n      ? `**InversiÃ³n en Proyectos de Aurin**\\n\\n**ðŸ’° Enfoque de Pricing:**\\nEn Aurin, cada proyecto es Ãºnico. Nuestras tarifas se adaptan a la complejidad, alcance y objetivos especÃ­ficos.\\n\\n**ðŸŽ¯ Factores que consideramos:**\\n- Alcance del proyecto\\n- Complejidad del diseÃ±o\\n- Timeline requerido\\n- Nivel de investigaciÃ³n necesario\\n\\n**ðŸ’¡ Siguiente Paso:**\\nPara darte un presupuesto preciso, necesitamos entender mejor tu proyecto.\\n\\n**Durante la consulta gratuita (30-60 min):**\\nâœ… Entendemos tus necesidades\\nâœ… Definimos alcance del proyecto\\nâœ… Te presentamos una propuesta personalizada\\nâœ… Respondemos todas tus preguntas\\n\\nðŸ”— **ContÃ¡ctanos:** ${currentUrls.contacto}\\nðŸ“§ **Email:** [hey@aurin.mx](mailto:hey@aurin.mx)\\n\\nÂ¿Prefieres agendar una videollamada o que te contactemos por email?`\n      : `**Investment in Aurin Projects**\\n\\nEach project is unique. Our rates adapt to complexity, scope, and specific objectives.\\n\\nFor an accurate quote, we need to understand your project better.\\n\\nðŸ”— **Contact us:** ${currentUrls.contacto}\\nðŸ“§ **Email:** [hey@aurin.mx](mailto:hey@aurin.mx)\\n\\nSchedule a free consultation or email us!`\n  },\n  \n  contacto: {\n    keywords: ['contacto', 'email', 'telÃ©fono', 'cita', 'reuniÃ³n', 'contact', 'meeting', 'appointment', 'reach'],\n    response: lang === 'es'\n      ? `**Contacta a Aurin**\\n\\n**ðŸ“§ Email:** [hey@aurin.mx](mailto:hey@aurin.mx)\\n\\n**ðŸŒ Sitio Web:** ${currentUrls.home}\\n\\n**ðŸ“ UbicaciÃ³n:** Aldea Creativa, MÃ©xico\\n\\n**â° Horario de AtenciÃ³n:**\\nLunes a Viernes: 9:00 AM - 6:00 PM\\n(Zona horaria: Ciudad de MÃ©xico GMT-6)\\n\\n**ðŸ“… Consulta Gratuita (30-60 min):**\\nOfrecemos consultas gratuitas para:\\n- Entender tu proyecto\\n- Discutir objetivos y necesidades\\n- Proponer soluciones\\n- Responder todas tus preguntas\\n\\n**ðŸ”— Enlaces RÃ¡pidos:**\\nâ€¢ [Inicio](${currentUrls.home})\\nâ€¢ [Servicios](${currentUrls.servicios})\\nâ€¢ [Proyectos](${currentUrls.proyectos})\\nâ€¢ [Nosotros](${currentUrls.nosotros})\\nâ€¢ [Contacto](${currentUrls.contacto})\\n\\n**Â¿CÃ³mo prefieres continuar?**\\n1. ðŸ“… Agendar una videollamada\\n2. âœ‰ï¸ Recibir informaciÃ³n por email\\n3. ðŸŽ« Crear un ticket de soporte`\n      : `**Contact Aurin**\\n\\n**ðŸ“§ Email:** [hey@aurin.mx](mailto:hey@aurin.mx)\\n\\n**ðŸŒ Website:** ${currentUrls.home}\\n\\n**ðŸ“ Location:** Aldea Creativa, Mexico\\n\\n**â° Business Hours:**\\nMonday - Friday: 9:00 AM - 6:00 PM\\n(Mexico City timezone GMT-6)\\n\\n**ðŸ“… Free Consultation (30-60 min)**\\n\\n**ðŸ”— Quick Links:**\\nâ€¢ [Home](${currentUrls.home})\\nâ€¢ [Services](${currentUrls.servicios})\\nâ€¢ [Projects](${currentUrls.proyectos})\\nâ€¢ [About](${currentUrls.nosotros})\\nâ€¢ [Contact](${currentUrls.contacto})\\n\\n**How would you like to proceed?**\\n1. ðŸ“… Schedule a video call\\n2. âœ‰ï¸ Get info via email\\n3. ðŸŽ« Create a support ticket`\n  },\n  \n  herramientas: {\n    keywords: ['herramientas', 'software', 'programas', 'tecnologÃ­a', 'tools', 'tech stack'],\n    response: lang === 'es'\n      ? `**Herramientas y TecnologÃ­a de Aurin**\\n\\n**ðŸŽ¨ DiseÃ±o y Creatividad:**\\n- Adobe Creative Suite (Photoshop, Illustrator, InDesign)\\n- Figma para diseÃ±o UX/UI\\n- Sketch para interfaces\\n- Adobe XD para prototipos\\n\\n**ðŸ–¥ï¸ Desarrollo Web:**\\n- HTML5, CSS3, JavaScript\\n- React y frameworks modernos\\n- Responsive design\\n- OptimizaciÃ³n web\\n\\n**ðŸ“Š Estrategia y AnÃ¡lisis:**\\n- Research de mercado\\n- Testing de usabilidad\\n- Analytics y mÃ©tricas\\n\\n**âœ¨ Storytelling Visual:**\\nUtilizamos tÃ©cnicas avanzadas de storytelling para crear narrativas visuales que conectan emocionalmente con tu audiencia.\\n\\nðŸ”— **Ver nuestro trabajo:** ${currentUrls.proyectos}\\n\\nÂ¿Tienes un proyecto en mente?`\n      : `**Aurin's Tools & Technology**\\n\\n**ðŸŽ¨ Design & Creativity:**\\n- Adobe Creative Suite\\n- Figma for UX/UI\\n- Sketch for interfaces\\n\\n**ðŸ–¥ï¸ Web Development:**\\n- HTML5, CSS3, JavaScript\\n- React & modern frameworks\\n\\nðŸ”— **See our work:** ${currentUrls.proyectos}\\n\\nHave a project in mind?`\n  },\n\n  uxui: {\n    keywords: ['ux', 'ui', 'experiencia', 'usuario', 'interfaz', 'usabilidad', 'user experience'],\n    response: lang === 'es'\n      ? `**Servicios UX/UI de Aurin**\\n\\n**ðŸŽ¯ DiseÃ±o de Experiencia de Usuario (UX):**\\n- InvestigaciÃ³n de usuarios\\n- Personas y user journeys\\n- Arquitectura de informaciÃ³n\\n- Testing de usabilidad\\n\\n**ðŸŽ¨ DiseÃ±o de Interfaz (UI):**\\n- Interfaces intuitivas y atractivas\\n- Sistemas de diseÃ±o escalables\\n- Componentes reutilizables\\n- Microinteracciones\\n\\n**ðŸ“± Responsive Design:**\\n- Mobile-first approach\\n- AdaptaciÃ³n a todos los dispositivos\\n- Performance optimization\\n\\n**âœ… Entregables:**\\n- Prototipos interactivos\\n- Design system completo\\n- Especificaciones para desarrollo\\n- GuÃ­as de estilo\\n\\nðŸ”— **Ver servicios UX/UI:** ${currentUrls.servicios}\\n\\nÂ¿Tienes un proyecto digital en mente? Â¡Hablemos!`\n      : `**Aurin's UX/UI Services**\\n\\n**ðŸŽ¯ User Experience (UX):**\\n- User research\\n- User journeys\\n- Information architecture\\n\\n**ðŸŽ¨ User Interface (UI):**\\n- Intuitive interfaces\\n- Scalable design systems\\n- Micro-interactions\\n\\n**ðŸ“± Responsive Design**\\n\\nðŸ”— **View UX/UI services:** ${currentUrls.servicios}\\n\\nHave a digital project? Let's talk!`\n  }\n};\n\n// Buscar la mejor respuesta\nlet bestMatch = null;\nlet maxMatches = 0;\n\nfor (const [category, data] of Object.entries(knowledgeBase)) {\n  const matches = data.keywords.filter(keyword => question.includes(keyword)).length;\n  if (matches > maxMatches) {\n    maxMatches = matches;\n    bestMatch = data.response;\n  }\n}\n\n// Si no hay coincidencia, dar respuesta genÃ©rica\nconst finalResponse = bestMatch || (lang === 'es'\n  ? `**InformaciÃ³n sobre Aurin**\\n\\nAurin es una agencia de diseÃ±o y comunicaciÃ³n visual en MÃ©xico, especializada en:\\n\\n- ðŸŽ¨ DiseÃ±o grÃ¡fico y branding\\n- ðŸ’» UX/UI y diseÃ±o digital\\n- ðŸ“Š Estrategia de comunicaciÃ³n visual\\n- âœ¨ Storytelling visual\\n\\n**Puedo ayudarte con informaciÃ³n sobre:**\\n- Nuestros servicios y proceso de trabajo\\n- Portafolio y casos de Ã©xito\\n- Precios y presupuestos\\n- Agendar una consulta gratuita\\n- InformaciÃ³n de contacto\\n\\n**ðŸ”— Enlaces Ãºtiles:**\\nâ€¢ [Inicio](${currentUrls.home})\\nâ€¢ [Servicios](${currentUrls.servicios})\\nâ€¢ [Proyectos](${currentUrls.proyectos})\\nâ€¢ [Nosotros](${currentUrls.nosotros})\\nâ€¢ [Contacto](${currentUrls.contacto})\\n\\nÂ¿QuÃ© te gustarÃ­a saber especÃ­ficamente?`\n  : `**About Aurin**\\n\\nAurin is a design and visual communication agency in Mexico, specialized in:\\n\\n- ðŸŽ¨ Graphic design & branding\\n- ðŸ’» UX/UI & digital design\\n- ðŸ“Š Visual communication strategy\\n- âœ¨ Visual storytelling\\n\\n**ðŸ”— Useful links:**\\nâ€¢ [Home](${currentUrls.home})\\nâ€¢ [Services](${currentUrls.servicios})\\nâ€¢ [Projects](${currentUrls.proyectos})\\nâ€¢ [About](${currentUrls.nosotros})\\nâ€¢ [Contact](${currentUrls.contacto})\\n\\nWhat would you like to know?`);\n\nreturn {\n  json: {\n    response: finalResponse,\n    category: bestMatch ? Object.keys(knowledgeBase).find(k => knowledgeBase[k].response === bestMatch) : 'general',\n    confidence: maxMatches > 0 ? 'high' : 'low',\n    language: lang\n  }\n};"
      },
      "id": "79ddbbda-7472-4f3e-b71d-c7ddf7733db4",
      "name": "Knowledge Base Lookup",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        608,
        -32
      ]
    },
    {
      "parameters": {
        "jsCode": "// Formatear respuesta para el agente principal\nconst response = $input.item.json.response;\nconst category = $input.item.json.category;\nconst confidence = $input.item.json.confidence;\nconst language = $input.item.json.language;\n\nreturn {\n  json: {\n    output: response,\n    success: true,\n    source: 'knowledge_base',\n    category: category,\n    confidence: confidence,\n    language: language\n  }\n};"
      },
      "id": "96036f11-9022-46c9-9d39-37fc806bb2ae",
      "name": "Format Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        832,
        -32
      ]
    }
  ],
  "pinData": {},
  "connections": {
    "Execute Workflow Trigger": {
      "main": [
        [
          {
            "node": "Parse Question",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Question": {
      "main": [
        [
          {
            "node": "Knowledge Base Lookup",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Knowledge Base Lookup": {
      "main": [
        [
          {
            "node": "Format Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "b40c2f92-13da-43ad-8ade-663a01926d5b",
  "meta": {
    "instanceId": "473b8e2f44c2c249c630a674e0ffd242a718055278d7a389908825386c510f30"
  },
  "id": "rPEVrWKRByrpoSC6",
  "tags": []
}