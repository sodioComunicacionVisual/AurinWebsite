---
import InteractiveBackground from '../../../ui/InteractiveBackground.astro';
import Vignette from '../../../ui/Vignette.astro';
import Header from '../../../ui/Header.astro';
import MainCat from '../../../ui/MainCat.astro';
import Projects from '../../../ui/Projects.astro';
import StickyFooter from '../../../ui/StickyFooter.astro';
import ProjectBanner from './atoms/ProjectBanner.astro';
import GalleryCarousel from '../../../ui/carousel/GalleryCarousel';
import styles from './Template.module.css';

// TypeScript interfaces para props din√°micas desde Payload
interface GalleryImage {
  imgUrl: string;
  alt: string;
}

interface ProjectTemplateProps {
  // Banner Section
  projectTitle: string;
  projectCategories: string[]; // Ahora son los servicios ofrecidos
  projectDescription: string;
  bannerImage?: string;

  // Gallery Section (replaces Main Image)
  gallery?: GalleryImage[];

  // Optional Payload fields
  publishDate?: Date;
  featured?: boolean;
  status?: string;
}

interface Props {
  projectData: ProjectTemplateProps;
}

const { projectData } = Astro.props;
---

<InteractiveBackground />
<Vignette intensity="medium" />

<!-- Header Navigation -->
<Header />

<article class={styles.projectTemplate}>
  <!-- Strip 1: Project Banner (Hero) -->
  <ProjectBanner
    title={projectData.projectTitle}
    categories={projectData.projectCategories}
    description={projectData.projectDescription}
    bannerImage={projectData.bannerImage}
  />

  <!-- Strip 2: Image Gallery Carousel -->
  {projectData.gallery && projectData.gallery.length > 0 && (
    <section class={styles.gallerySection}>
      <GalleryCarousel
        client:load
        data={projectData.gallery}
      />
    </section>
  )}
</article>

<!-- Projects Section -->
<Projects />

<!-- Main Category Navigation -->
<MainCat />

<!-- Footer -->
<StickyFooter />
