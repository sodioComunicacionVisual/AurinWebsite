---
// MainImage component - Imagen principal de la secci√≥n Nosotros
import { getLangFromUrl } from '../../../i18n/utils.js';
import { translations } from '../../../i18n/translations.js';
import styles from './MainImage.module.css';

// Detect current language
const currentLang = getLangFromUrl(Astro.url);
const t = translations[currentLang];
---

<section class={styles['main-image-section']}>
  <div class={styles['image-wrapper']}>
    <img
      src="https://pub-d17bbbdbf8e348c5a57c8168ad69c92f.r2.dev/NosotrosImage.webp"
      alt={t.about.mainImage.alt}
      class={`${styles['main-image']} ukiyo`}
      loading="lazy"
      decoding="async"
      data-u-speed="1.5"
      data-u-scale="1.2"
    />
  </div>
</section>

<script>
  import Ukiyo from 'ukiyojs';
  
  // Initialize Ukiyo parallax effect when the DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    const ukiyoInstance = new Ukiyo('.ukiyo', {
      speed: 1.5,
      scale: 1.2,
      wrapperClass: 'ukiyo-wrapper',
      willChange: true
    });
    
    // Ensure responsive behavior on resize
    let resizeTimeout: NodeJS.Timeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        // Reinitialize or refresh Ukiyo if needed
        const wrapper = document.querySelector('.ukiyo-wrapper');
        if (wrapper) {
          wrapper.style.width = '100%';
          wrapper.style.maxWidth = '100%';
        }
      }, 250);
    });
  });
</script>
